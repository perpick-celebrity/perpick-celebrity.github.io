import './App.svelte.css';
/* src/components/App/App.svelte generated by Svelte v3.32.3 */
import {
	SvelteComponent,
	append,
	attr,
	check_outros,
	component_subscribe,
	create_component,
	destroy_component,
	detach,
	element,
	group_outros,
	init as init_1,
	insert,
	listen,
	mount_component,
	noop,
	safe_not_equal,
	set_data,
	set_store_value,
	space,
	text,
	transition_in,
	transition_out
} from "../../../_snowpack/pkg/svelte/internal.js";

import { onMount } from "../../../_snowpack/pkg/svelte.js";
import { nav, users } from "../../stores/index.js";
import Home from "../../pages/Home.svelte.js";
import Result from "../../pages/Results.svelte.js";
import IntersectionObserver from "../Image/IntersectionObserver.svelte.js";
import RoundedEmbed from "../Image/RoundedEmbed.svelte.js";
import MailChimp from "../MailChimp.svelte.js";
import AuthAPI from "../../api/auth.js";
import PerfumesAPI from "../../api/perfumes.js";
import PerpickIsNow from "../PerpickIsNow/PerpickIsNow.svelte.js";
import "../../styles/TailwindStyles.svelte.js";
import Typewriter from "../Typewriter/Typewriter.svelte.js";
import Select from "../svelte-select/index.js";

function create_default_slot_2(ctx) {
	let roundedembed;
	let current;

	roundedembed = new RoundedEmbed({
			props: {
				src: "/banner.svg",
				alt: "logo",
				type: "image/svg+xml"
			}
		});

	return {
		c() {
			create_component(roundedembed.$$.fragment);
		},
		m(target, anchor) {
			mount_component(roundedembed, target, anchor);
			current = true;
		},
		p: noop,
		i(local) {
			if (current) return;
			transition_in(roundedembed.$$.fragment, local);
			current = true;
		},
		o(local) {
			transition_out(roundedembed.$$.fragment, local);
			current = false;
		},
		d(detaching) {
			destroy_component(roundedembed, detaching);
		}
	};
}

// (64:6) <Typewriter interval={125} delay={1000}>
function create_default_slot_1(ctx) {
	let p;
	let t0;
	let t1;
	let t2;

	return {
		c() {
			p = element("p");
			t0 = text("Ïù¥ ÏÑúÎπÑÏä§Î•º ÌÜµÌï¥ ÏïΩ ");
			t1 = text(/*total*/ ctx[0]);
			t2 = text("Î≤à Ï∂îÏ≤úÎêòÏóàÏñ¥Ïöî!");
			attr(p, "class", "text-xs font-thin my-1 svelte-t62fe8");
		},
		m(target, anchor) {
			insert(target, p, anchor);
			append(p, t0);
			append(p, t1);
			append(p, t2);
		},
		p(ctx, dirty) {
			if (dirty & /*total*/ 1) set_data(t1, /*total*/ ctx[0]);
		},
		d(detaching) {
			if (detaching) detach(p);
		}
	};
}

// (73:4) <IntersectionObserver>
function create_default_slot(ctx) {
	let result;
	let current;
	result = new Result({});

	return {
		c() {
			create_component(result.$$.fragment);
		},
		m(target, anchor) {
			mount_component(result, target, anchor);
			current = true;
		},
		i(local) {
			if (current) return;
			transition_in(result.$$.fragment, local);
			current = true;
		},
		o(local) {
			transition_out(result.$$.fragment, local);
			current = false;
		},
		d(detaching) {
			destroy_component(result, detaching);
		}
	};
}

// (78:4) {#if $nav.current === "results" || $nav.current === "type"}
function create_if_block(ctx) {
	let mailchimp;
	let current;
	mailchimp = new MailChimp({});

	return {
		c() {
			create_component(mailchimp.$$.fragment);
		},
		m(target, anchor) {
			mount_component(mailchimp, target, anchor);
			current = true;
		},
		i(local) {
			if (current) return;
			transition_in(mailchimp.$$.fragment, local);
			current = true;
		},
		o(local) {
			transition_out(mailchimp.$$.fragment, local);
			current = false;
		},
		d(detaching) {
			destroy_component(mailchimp, detaching);
		}
	};
}

function create_fragment(ctx) {
	let script;
	let script_src_value;
	let link0;
	let link1;
	let t0;
	let div2;
	let header;
	let intersectionobserver0;
	let t1;
	let main;
	let div1;
	let typewriter;
	let t2;
	let div0;
	let select;
	let t3;
	let intersectionobserver1;
	let t4;
	let footer;
	let t5;
	let perpickisnow;
	let current;
	let mounted;
	let dispose;

	intersectionobserver0 = new IntersectionObserver({
			props: {
				$$slots: { default: [create_default_slot_2] },
				$$scope: { ctx }
			}
		});

	typewriter = new Typewriter({
			props: {
				interval: 125,
				delay: 1000,
				$$slots: { default: [create_default_slot_1] },
				$$scope: { ctx }
			}
		});

	select = new Select({
			props: {
				items: /*items*/ ctx[2],
				groupBy: /*groupBy*/ ctx[3],
				placeholder: "ÎãπÏã†Ïùò ÏµúÏï†Î•º Í≤ÄÏÉâÌï¥Ï£ºÏÑ∏Ïöî üßö"
			}
		});

	select.$on("select", /*handleSelect*/ ctx[4]);

	intersectionobserver1 = new IntersectionObserver({
			props: {
				$$slots: { default: [create_default_slot] },
				$$scope: { ctx }
			}
		});

	let if_block = (/*$nav*/ ctx[1].current === "results" || /*$nav*/ ctx[1].current === "type") && create_if_block(ctx);
	perpickisnow = new PerpickIsNow({});

	return {
		c() {
			script = element("script");
			link0 = element("link");
			link1 = element("link");
			t0 = space();
			div2 = element("div");
			header = element("header");
			create_component(intersectionobserver0.$$.fragment);
			t1 = space();
			main = element("main");
			div1 = element("div");
			create_component(typewriter.$$.fragment);
			t2 = space();
			div0 = element("div");
			create_component(select.$$.fragment);
			t3 = space();
			create_component(intersectionobserver1.$$.fragment);
			t4 = space();
			footer = element("footer");
			if (if_block) if_block.c();
			t5 = space();
			create_component(perpickisnow.$$.fragment);
			if (script.src !== (script_src_value = "https://developers.kakao.com/sdk/js/kakao.min.js")) attr(script, "src", script_src_value);
			attr(link0, "rel", "preconnect");
			attr(link0, "href", "https://fonts.gstatic.com");
			attr(link1, "href", "https://fonts.googleapis.com/css2?family=Noto+Sans&display=swap");
			attr(link1, "rel", "stylesheet");
			attr(header, "class", "m-4  cursor-pointer");
			attr(div0, "class", "themedSearch text-left svelte-t62fe8");
			attr(div1, "class", "m-2");
			attr(footer, "class", "pb-24 ");
			attr(div2, "class", "w-full max-w-xs wrap  svelte-t62fe8");
		},
		m(target, anchor) {
			append(document.head, script);
			append(document.head, link0);
			append(document.head, link1);
			insert(target, t0, anchor);
			insert(target, div2, anchor);
			append(div2, header);
			mount_component(intersectionobserver0, header, null);
			append(div2, t1);
			append(div2, main);
			append(main, div1);
			mount_component(typewriter, div1, null);
			append(div1, t2);
			append(div1, div0);
			mount_component(select, div0, null);
			append(main, t3);
			mount_component(intersectionobserver1, main, null);
			append(div2, t4);
			append(div2, footer);
			if (if_block) if_block.m(footer, null);
			append(footer, t5);
			mount_component(perpickisnow, footer, null);
			current = true;

			if (!mounted) {
				dispose = listen(header, "click", /*click_handler*/ ctx[5]);
				mounted = true;
			}
		},
		p(ctx, [dirty]) {
			const intersectionobserver0_changes = {};

			if (dirty & /*$$scope*/ 256) {
				intersectionobserver0_changes.$$scope = { dirty, ctx };
			}

			intersectionobserver0.$set(intersectionobserver0_changes);
			const typewriter_changes = {};

			if (dirty & /*$$scope, total*/ 257) {
				typewriter_changes.$$scope = { dirty, ctx };
			}

			typewriter.$set(typewriter_changes);
			const intersectionobserver1_changes = {};

			if (dirty & /*$$scope*/ 256) {
				intersectionobserver1_changes.$$scope = { dirty, ctx };
			}

			intersectionobserver1.$set(intersectionobserver1_changes);

			if (/*$nav*/ ctx[1].current === "results" || /*$nav*/ ctx[1].current === "type") {
				if (if_block) {
					if (dirty & /*$nav*/ 2) {
						transition_in(if_block, 1);
					}
				} else {
					if_block = create_if_block(ctx);
					if_block.c();
					transition_in(if_block, 1);
					if_block.m(footer, t5);
				}
			} else if (if_block) {
				group_outros();

				transition_out(if_block, 1, 1, () => {
					if_block = null;
				});

				check_outros();
			}
		},
		i(local) {
			if (current) return;
			transition_in(intersectionobserver0.$$.fragment, local);
			transition_in(typewriter.$$.fragment, local);
			transition_in(select.$$.fragment, local);
			transition_in(intersectionobserver1.$$.fragment, local);
			transition_in(if_block);
			transition_in(perpickisnow.$$.fragment, local);
			current = true;
		},
		o(local) {
			transition_out(intersectionobserver0.$$.fragment, local);
			transition_out(typewriter.$$.fragment, local);
			transition_out(select.$$.fragment, local);
			transition_out(intersectionobserver1.$$.fragment, local);
			transition_out(if_block);
			transition_out(perpickisnow.$$.fragment, local);
			current = false;
		},
		d(detaching) {
			detach(script);
			detach(link0);
			detach(link1);
			if (detaching) detach(t0);
			if (detaching) detach(div2);
			destroy_component(intersectionobserver0);
			destroy_component(typewriter);
			destroy_component(select);
			destroy_component(intersectionobserver1);
			if (if_block) if_block.d();
			destroy_component(perpickisnow);
			mounted = false;
			dispose();
		}
	};
}

function instance($$self, $$props, $$invalidate) {
	let $users;
	let $nav;
	component_subscribe($$self, users, $$value => $$invalidate(6, $users = $$value));
	component_subscribe($$self, nav, $$value => $$invalidate(1, $nav = $$value));

	const items = [
		{
			value: "chocolate",
			label: "Chocolate",
			group: "Sweet"
		},
		{
			value: "pizza",
			label: "Pizza",
			group: "Savory"
		},
		{
			value: "cake",
			label: "Cake",
			group: "Sweet"
		},
		{
			value: "chips",
			label: "Chips",
			group: "Savory"
		},
		{
			value: "ice-cream",
			label: "Ice Cream",
			group: "Sweet"
		}
	];

	onMount(() => {
		set_store_value(users, $users.select = { value: "", label: "", group: "" }, $users);
		init();
	});

	let total = "324,523";
	const groupBy = item => item.group;

	const init = async () => {
		await AuthAPI.login();
		const { data = 0 } = await PerfumesAPI.getTotalWitjCelebrity();
		$$invalidate(0, total = data.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","));
	};

	// const handleKeyPress = (evnet: KeyboardEvent) => {
	//   if (evnet.key === "Enter") {
	//     handleLetsPerpick();
	//   }
	// };
	const handleSelect = event => {
		set_store_value(users, $users.select = event.detail, $users);
	};

	const click_handler = () => {
		set_store_value(nav, $nav.current = "home", $nav);
	};

	return [total, $nav, items, groupBy, handleSelect, click_handler];
}

class App extends SvelteComponent {
	constructor(options) {
		super();
		init_1(this, options, instance, create_fragment, safe_not_equal, {});
	}
}

export default App;